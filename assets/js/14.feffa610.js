(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{660:function(t,a,s){"use strict";s.r(a);var e=s(5),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("Boxx",{attrs:{blockStyle:t.blockStyle}}),t._v(" "),s("h2",{attrs:{id:"场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[t._v("#")]),t._v(" 场景:")]),t._v(" "),s("p",[t._v("iPhoneX 系列的手机在屏幕的底部有一个小黑条，在屏幕底部有内容展示或交互按钮的情况下，展示效果上会有些影响。")]),t._v(" "),s("p",[t._v("为了消除这个影响，需要把底部内容提高，增加底部的留白空间。")]),t._v(" "),s("p",[t._v("最初小程序端是通过机型判断，针对 iPhone X 机型增加样式。")]),t._v(" "),s("p",[t._v("这样做的劣势是未涵盖全部机型，比如新出现的 iPhone 11 就无法得到有效判断。")]),t._v(" "),s("p",[t._v("而 iOS 中有在 webkit 新增两个函数，可以解决这个问题。")]),t._v(" "),s("h2",{attrs:{id:"适配之前需要了解的知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#适配之前需要了解的知识"}},[t._v("#")]),t._v(" 适配之前需要了解的知识")]),t._v(" "),s("h3",{attrs:{id:"安全区域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安全区域"}},[t._v("#")]),t._v(" 安全区域")]),t._v(" "),s("p",[t._v("所谓安全区域，指的是一个可视窗口范围，处于这个区域中的内容不会受到手机屏幕的圆角、齐刘海、底部小黑条所影响")]),t._v(" "),s("h3",{attrs:{id:"env-和-constant"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#env-和-constant"}},[t._v("#")]),t._v(" env() 和 constant()")]),t._v(" "),s("p",[t._v("iOS11 新增特性，webkit 的两个 CSS 函数 env() 和 constant() 用于设定安全区域与边界的距离，目前有四个值：")]),t._v(" "),s("ol",[s("li",[t._v("safe-area-inset-left: 安全区域到左边界的距离")]),t._v(" "),s("li",[t._v("safe-area-inset-right: 安全区域到右边界的距离")]),t._v(" "),s("li",[t._v("safe-area-inset-top: 安全区域到上边界的距离")]),t._v(" "),s("li",[t._v("safe-area-inset-bottom: 安全区域到下边界的距离\n这里我们只需要关注 safe-area-inset-bottom 这个变量，因为它对应的就是小黑条的高度（横竖屏时值不一样）。")])]),t._v(" "),s("p",[t._v("注: constant() 是 iOS11 最初设计的函数，但是在 iOS11.2 之后被废弃，改名为 env()\n为了兼容，需要两个都使用，且顺序要先 constant 后 env。\n比如:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  .footer {\n    padding-bottom: calc(8px + constant(safe-area-inset-bottom)); /* 兼容 iOS11.2 以下 */\n    padding-bottom: calc(8px + env(safe-area-inset-bottom));      /* 兼容 iOS11.2 及以上 */\n  }\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("在 web 上的使用\nweb 页面内需要给 meta 标签添加一个 viewport-fit=cover 来开启")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('  <meta name="viewport" content="width=device-width, viewport-fit=cover">\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"viewport-fit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#viewport-fit"}},[t._v("#")]),t._v(" viewport-fit")]),t._v(" "),s("p",[t._v("iOS11 新增特性，苹果公司为了适配 iPhoneX 对现有 viewport meta 标签的一个扩展，用于设置网页在可视窗口的布局方式，可设置三个值：")]),t._v(" "),s("ol",[s("li",[t._v("contain: 可视窗口完全包含网页内容（左图）")]),t._v(" "),s("li",[t._v("cover：网页内容完全覆盖可视窗口（右图）")]),t._v(" "),s("li",[t._v("auto：默认值，跟 contain 表现一致")])]),t._v(" "),s("h2",{attrs:{id:"具体适配方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#具体适配方式"}},[t._v("#")]),t._v(" 具体适配方式")]),t._v(" "),s("ol",[s("li",[t._v("通过 padding 增高")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  .footer {\n    // ...\n    padding-bottom: constant(safe-area-inset-bottom);\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("增加 height")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  .footer {\n    // ...\n    height: calc(60px + constant(safe-area-inset-bottom));\n    height: calc(60px + env(safe-area-inset-bottom));\n  }\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("侧栏广告类，可通过 margin-bottom 提升")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".go-top {\n  position: fixed;\n  right: 10px;\n  bottom: calc(50px + constant(safe-area-inset-bottom));\n  bottom: calc(50px + env(safe-area-inset-bottom));\n}\n@supports 隔离兼容样式\n\n@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {\n  .bottom {\n    margin-bottom: constant(safe-area-inset-bottom);\n    margin-bottom: env(safe-area-inset-bottom);\n  }\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);